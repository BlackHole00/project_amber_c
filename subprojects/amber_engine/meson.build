project('amber_engine', 'c')

engine_deps = [
  dependency('amber_engine_common', fallback: ['amber_engine_common', 'amber_engine_common_dep'])
]
engine_lib = executable('amber_engine', [
    'src/main.c',
    'src/engine.c',
    'src/bindings/proc_table.c',
  ],
  dependencies: engine_deps,
)

amber_engine_dep = declare_dependency(
  link_with: engine_lib,
)
set_variable(meson.project_name() + '_dep', amber_engine_dep)

pkg = import('pkgconfig')
pkg.generate(
  name : meson.project_name(),
  filebase : meson.project_name(),
  subdirs : meson.project_name(),
  description: 'The Amber Engine'
)